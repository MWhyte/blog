<!DOCTYPE html>
<html ⚡>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

    <title>Spring Security - Basic Login Form</title>

    <link rel="canonical" href="../index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    
    <meta property="og:site_name" content="codenerve.com" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Spring Security - Basic Login Form" />
    <meta property="og:description" content="[vc_row][vc_column][vc_column_text] Welcome! In this series, I hope to show you some techniques for using spring security and the broader spring ecosystem to build and develop secure application web servers.  Today, we&amp;#8217;ll be looking at building a basic login form page using:  Spring" />
    <meta property="og:url" content="http://localhost:2368/spring-security-basic-login-form/" />
    <meta property="og:image" content="http://localhost:2368/content/images/wordpress/2018/01/blade-blur-dew-212324.jpg" />
    <meta property="article:published_time" content="2019-04-25T22:20:29.000Z" />
    <meta property="article:modified_time" content="2020-06-09T22:41:23.000Z" />
    <meta property="article:publisher" content="https://www.facebook.com/ghost" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Spring Security - Basic Login Form" />
    <meta name="twitter:description" content="[vc_row][vc_column][vc_column_text] Welcome! In this series, I hope to show you some techniques for using spring security and the broader spring ecosystem to build and develop secure application web servers.  Today, we&amp;#8217;ll be looking at building a basic login form page using:  Spring" />
    <meta name="twitter:url" content="http://localhost:2368/spring-security-basic-login-form/" />
    <meta name="twitter:image" content="http://localhost:2368/content/images/wordpress/2018/01/blade-blur-dew-212324.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Michael W" />
    <meta name="twitter:site" content="ghost" />
    <meta property="og:image:width" content="3600" />
    <meta property="og:image:height" content="2400" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "codenerve.com",
        "url": "http://localhost:2368/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://static.ghost.org/v1.0.0/images/ghost-logo.svg"
        }
    },
    "author": {
        "@type": "Person",
        "name": "Michael W",
        "image": {
            "@type": "ImageObject",
            "url": "https://secure.gravatar.com/avatar/38fe2075db7c0586b2e0806c1d55d740?s=512&r=g",
            "width": 512,
            "height": 512
        },
        "url": "http://localhost:2368/author/mrwhyte/",
        "sameAs": []
    },
    "headline": "Spring Security - Basic Login Form",
    "url": "http://localhost:2368/spring-security-basic-login-form/",
    "datePublished": "2019-04-25T22:20:29.000Z",
    "dateModified": "2020-06-09T22:41:23.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:2368/content/images/wordpress/2018/01/blade-blur-dew-212324.jpg",
        "width": 3600,
        "height": 2400
    },
    "description": "[vc_row][vc_column][vc_column_text]Welcome!\nIn this series, I hope to show you some techniques for using spring security and\nthe broader spring ecosystem to build and develop secure application web\nservers.\n\nToday, we’ll be looking at building a basic login form page using:\n\n * Spring Boot\n * Spring Security, and\n * Thymeleaf\n\n[/vc_column_text][/vc_column][/vc_row][vc_row height&#x3D;”auto”][vc_column][us_cta\ntitle&#x3D;”Sample Code” color&#x3D;”secondary” btn_label&#x3D;”Code”\nbtn_link&#x3D;”url:https%3A%2F%2Fgithub.co",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.25" />
    <link rel="alternate" type="application/rss+xml" title="codenerve.com" href="../../rss/index.html" />

    <style amp-custom>
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    html {
        overflow-x: hidden;
        overflow-y: scroll;
        font-size: 62.5%;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }

    body {
        min-height: 100vh;
        margin: 0;
        padding: 0;
        color: #3a4145;
        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;
        font-size: 1.7rem;
        line-height: 1.55em;
        font-weight: 400;
        font-style: normal;
        background: #fff;
        scroll-behavior: smooth;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    p,
    ul,
    ol,
    li,
    dl,
    dd,
    hr,
    pre,
    form,
    table,
    video,
    figure,
    figcaption,
    blockquote {
        margin: 0;
        padding: 0;
    }

    ul[class],
    ol[class] {
        padding: 0;
        list-style: none;
    }

    img {
        display: block;
        max-width: 100%;
    }

    input,
    button,
    select,
    textarea {
        font: inherit;
        -webkit-appearance: none;
    }

    fieldset {
        margin: 0;
        padding: 0;
        border: 0;
    }

    label {
        display: block;
        font-size: 0.9em;
        font-weight: 700;
    }

    hr {
        position: relative;
        display: block;
        width: 100%;
        height: 1px;
        border: 0;
        border-top: 1px solid currentcolor;
        opacity: 0.1;
    }

    ::selection {
        text-shadow: none;
        background: #cbeafb;
    }

    mark {
        background-color: #fdffb6;
    }

    small {
        font-size: 80%;
    }

    sub,
    sup {
        position: relative;
        font-size: 75%;
        line-height: 0;
        vertical-align: baseline;
    }
    sup {
        top: -0.5em;
    }
    sub {
        bottom: -0.25em;
    }

    ul li + li {
        margin-top: 0.6em;
    }

    a {
        color: #1292EE;
        text-decoration-skip-ink: auto;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        margin: 0;
        font-weight: 700;
        color: #121212;
        line-height: 1.4em;
    }

    h1 {
        font-size: 3.4rem;
        line-height: 1.1em;
    }

    h2 {
        font-size: 2.4rem;
        line-height: 1.2em;
    }

    h3 {
        font-size: 1.8rem;
    }

    h4 {
        font-size: 1.7rem;
    }

    h5 {
        font-size: 1.6rem;
    }

    h6 {
        font-size: 1.6rem;
    }

    amp-img {
        height: 100%;
        width: 100%;
        max-width: 100%;
        max-height: 100%;
    }

    amp-img img {
        object-fit: cover;
    }

    .page-header {
        padding: 50px 5vmin 30px;
        text-align: center;
        font-size: 2rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .page-header a {
        color: #121212;
        font-weight: 700;
        text-decoration: none;
        font-size: 1.6rem;
        letter-spacing: -0.1px;
    }

    .post {
        max-width: 680px;
        margin: 0 auto;
    }

    .post-header {
        margin: 0 5vmin 5vmin;
        text-align: center;
    }

    .post-meta {
        margin: 1rem 0 0 0;
        text-transform: uppercase;
        color: #738a94;
        font-weight: 500;
        font-size: 1.3rem;
    }

    .post-image {
        margin: 0 0 5vmin;
    }

    .post-image img {
        display: block;
        width: 100%;
        height: auto;
    }

    .post-content {
        padding: 0 5vmin;
    }

    .post-content > * + * {
        margin-top: 1.5em;
    }

    .post-content [id]:not(:first-child) {
        margin: 2em 0 0;
    }

    .post-content > [id] + * {
        margin-top: 1rem;
    }

    .post-content [id] + .kg-card,
    .post-content blockquote + .kg-card {
        margin-top: 40px;
    }

    .post-content > ul,
    .post-content > ol,
    .post-content > dl {
        padding-left: 1.9em;
    }

    .post-content hr {
        margin-top: 40px;
    }

    .post .post-content hr + * {
        margin-top: 40px;
    }

    .post-content amp-img {
        background-color: #f8f8f8;
    }

    .post-content blockquote {
        position: relative;
        font-style: italic;
    }

    .post-content blockquote::before {
        content: "";
        position: absolute;
        left: -1.5em;
        top: 0;
        bottom: 0;
        width: 0.3rem;
        background: #000;
    }

    .post-content :not(.kg-card):not([id]) + .kg-card {
        margin-top: 40px;
    }

    .post-content .kg-card + :not(.kg-card) {
        margin-top: 40px;
    }

    .kg-card figcaption {
        padding: 1.5rem 1.5rem 0;
        text-align: center;
        font-weight: 500;
        font-size: 1.3rem;
        line-height: 1.4em;
        opacity: 0.6;
    }

    .kg-card figcaption strong {
        color: rgba(0,0,0,0.8);
    }

    .post-content :not(pre) code {
        vertical-align: middle;
        padding: 0.15em 0.4em 0.15em;
        border: #e1eaef 1px solid;
        font-weight: 400;
        font-size: 0.9em;
        line-height: 1em;
        color: #dc0050;
        background: #f0f6f9;
        border-radius: 0.25em;
    }

    .post-content > pre {
        overflow: scroll;
        padding: 16px 20px;
        color: #fff;
        background: #1F2428;
        border-radius: 5px;
        box-shadow: 0 2px 6px -2px rgba(0,0,0,.1), 0 0 1px rgba(0,0,0,.4);
    }

    .kg-embed-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
    }

    .kg-image-card img {
        margin: auto;
    }

    .kg-gallery-card + .kg-gallery-card {
        margin-top: 0.75em;
    }

    .kg-gallery-container {
        position: relative;
    }

    .kg-gallery-row {
        display: flex;
        flex-direction: row;
        justify-content: center;
    }

    .kg-gallery-image {
        width: 100%;
        height: 100%;
    }

    .kg-gallery-row:not(:first-of-type) {
        margin: 0.75em 0 0 0;
    }

    .kg-gallery-image:not(:first-of-type) {
        margin: 0 0 0 0.75em;
    }

    .kg-bookmark-card,
    .kg-bookmark-publisher {
        position: relative;
    }

    .kg-bookmark-container,
    .kg-bookmark-container:hover {
        display: flex;
        flex-wrap: wrap;
        flex-direction: row-reverse;
        color: currentColor;
        background: rgba(255,255,255,0.6);
        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;
        text-decoration: none;
        border-radius: 5px;
        box-shadow: 0 2px 6px -2px rgba(0, 0, 0, 0.1), 0 0 1px rgba(0, 0, 0, 0.4);
        overflow: hidden;
    }

    .kg-bookmark-content {
        flex-basis: 0;
        flex-grow: 999;
        padding: 20px;
        order: 1;
    }

    .kg-bookmark-title {
        font-weight: 600;
        font-size: 1.5rem;
        line-height: 1.3em;
    }

    .kg-bookmark-description {
        display: -webkit-box;
        max-height: 45px;
        margin: 0.5em 0 0 0;
        font-size: 1.4rem;
        line-height: 1.55em;
        overflow: hidden;
        opacity: 0.8;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }

    .kg-bookmark-metadata {
        margin-top: 20px;
    }

    .kg-bookmark-metadata {
        display: flex;
        align-items: center;
        font-weight: 500;
        font-size: 1.3rem;
        line-height: 1.3em;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .kg-bookmark-description {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;
    }

    .kg-bookmark-metadata amp-img {
        width: 18px;
        height: 18px;
        max-width: 18px;
        max-height: 18px;
        margin-right: 10px;
    }

    .kg-bookmark-thumbnail {
        display: flex;
        flex-basis: 20rem;
        flex-grow: 1;
        justify-content: flex-end;
    }

    .kg-bookmark-thumbnail amp-img {
        max-height: 200px;
    }

    .kg-bookmark-author {
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
    }

    .kg-bookmark-publisher::before {
        content: "•";
        margin: 0 .5em;
    }

    .kg-width-full.kg-card-hascaption {
        display: grid;
        grid-template-columns: inherit;
    }

    .post-content table {
        border-collapse: collapse;
        width: 100%;
    }

    .post-content th {
        padding: 0.5em 0.8em;
        text-align: left;
        font-size: .75em;
        text-transform: uppercase;
    }

    .post-content td {
        padding: 0.4em 0.7em;
    }

    .post-content tbody tr:nth-child(2n + 1) {
        background-color: rgba(0,0,0,0.1);
        padding: 1px;
    }

    .post-content tbody tr:nth-child(2n + 2) td:last-child {
        box-shadow:
            inset 1px 0 rgba(0,0,0,0.1),
            inset -1px 0 rgba(0,0,0,0.1);
    }

    .post-content tbody tr:nth-child(2n + 2) td {
        box-shadow: inset 1px 0 rgba(0,0,0,0.1);
    }

    .post-content tbody tr:last-child {
        border-bottom: 1px solid rgba(0,0,0,.1);
    }

    .page-footer {
        padding: 60px 5vmin;
        margin: 60px auto 0;
        text-align: center;
        background-color: #f8f8f8;
    }

    .page-footer h3 {
        margin: 0.5rem 0 0 0;
    }

    .page-footer p {
        max-width: 500px;
        margin: 1rem auto 1.5rem;
        font-size: 1.7rem;
        line-height: 1.5em;
        color: rgba(0,0,0,0.6)
    }

    .powered {
        display: inline-flex;
        align-items: center;
        margin: 30px 0 0;
        padding: 6px 9px 6px 6px;
        border: rgba(0,0,0,0.1) 1px solid;
        font-size: 12px;
        line-height: 12px;
        letter-spacing: -0.2px;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
        font-weight: 500;
        color: #222;
        text-decoration: none;
        background: #fff;
        border-radius: 6px;
    }

    .powered svg {
        height: 16px;
        width: 16px;
        margin: 0 6px 0 0;
    }

    @media (max-width: 600px) {
        body {
            font-size: 1.6rem;
        }
        h1 {
            font-size: 3rem;
        }

        h2 {
            font-size: 2.2rem;
        }
    }

    @media (max-width: 400px) {
        h1 {
            font-size: 2.6rem;
            line-height: 1.15em;
        }
        h2 {
            font-size: 2rem;
            line-height: 1.2em;
        }
        h3 {
            font-size: 1.7rem;
        }
    }
    </style>

    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>

    

</head>

<body class="amp-template">
    <header class="page-header">
        <a href="../../index.html">
                codenerve.com
        </a>
    </header>

    <main class="content" role="main">
        <article class="post">

            <header class="post-header">
                <h1 class="post-title">Spring Security - Basic Login Form</h1>
                <section class="post-meta">
                    Michael W -
                    <time class="post-date" datetime="2019-04-25">25 Apr 2019</time>
                </section>
            </header>
            <figure class="post-image">
                <amp-img src="http://localhost:2368/content/images/wordpress/2018/01/blade-blur-dew-212324.jpg" width="600" height="340" layout="responsive"></amp-img>
            </figure>
            <section class="post-content">

                [vc_row][vc_column][vc_column_text]
<h2>Welcome!</h2>
<p>In this series, I hope to show you some techniques for using spring security and the broader spring ecosystem to build and develop secure application web servers.</p>
<p>Today, we’ll be looking at building a basic login form page using:</p>
<ul>
<li>Spring Boot</li>
<li>Spring Security, and</li>
<li>Thymeleaf</li>
</ul>
[/vc_column_text][/vc_column][/vc_row][vc_row height=”auto”][vc_column][us_cta title=”Sample Code” color=”secondary” btn_label=”Code” btn_link=”url:https%3A%2F%2Fgithub.com%2FMWhyte%2Fspring-security%2Ftree%2F1.basic-form-login||target:%20_blank|” btn_style=”2″ btn_size=”15px” btn_icon=”fab|github”]The code for this lesson is available on GitHub[/us_cta][us_separator size=”small” show_line=”1″ icon=”fas|leaf”][/vc_column][/vc_row][vc_row css=”%7B%22default%22%3A%7B%22margin-top%22%3A%220px%22%2C%22border-top-width%22%3A%220px%22%2C%22padding-top%22%3A%220px%22%7D%7D”][vc_column][vc_column_text]First off lets briefly cover some of the project files that are of less interest:<p></p>
<ul>
<li>Application.java – contains our main method and the <em>@SpringBootApplication </em>annotation.</li>
<li>A CSS stylesheet is located under src/main/resources/static/css/ to make the demo pretty</li>
<li>Some Thymeleaf HTML templates are located under src/main/resources/ for demo purposes also.</li>
<li>An application.properties file is located under src/main/resources where we can pass configuration parameters to our spring boot application. A full list of options are documented <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html">here</a></li>
</ul>
[/vc_column_text][us_separator show_line=”1″ icon=”fas|leaf”][vc_column_text]
<h3>Dependencies</h3>
<p>As with all Spring boot application’s, there are a number of ‘Starter’ libraries that make it easy to add jars to your classpath. In addition, these can auto-configure various spring beans and behaviours that we can make use of:</p>
<ul>
<li>spring-boot-starter-parent – brings in all the required spring dependencies and manages there versions</li>
<li>spring-boot-starter-thymeleaf – adds thymeleaf-spring5 and thymeleaf-extras-java8time dependencies (<a href="http://www.thymeleaf.org/" target="_blank" rel="noopener noreferrer">more on thymeleaf</a>)</li>
<li>spring-boot-starter-security – adds spring-security-config, spring-security-web and spring-aop dependencies</li>
<li>spring-boot-starter-test – adds spring-boot-test, junit, <a href="http://hamcrest.org/" target="_blank" rel="noopener noreferrer">hamcrest</a> and <a href="https://site.mockito.org/" target="_blank" rel="noopener noreferrer">mockito</a></li>
<li>spring-security-test – adds the ability to mock user and user roles</li>
</ul>
[/vc_column_text][us_separator show_line=”1″ icon=”fas|leaf”][vc_column_text]
<h3>MvcConfig</h3>
<p>MvcConfig.java</p>
<pre class="lang:java decode:true">@Configuration
public class MvcConfig implements WebMvcConfigurer {

    @Override
    public void addViewControllers(ViewControllerRegistry registry) {
        registry.addViewController("/").setViewName("login");
        registry.addViewController("/index").setViewName("index");
        registry.addViewController("/login").setViewName("login");
    }
}</pre>
<p>This class implements spring’s <em>WebMvcConfigurer</em> interface. Implementing this interface allows you to override the method <em>addViewControllers</em> (as well as others) which is a way to configure simple automated controllers.</p>
<p>In this example, we have mapped them to our Thymeleaf views (under src/main/resources).[/vc_column_text][us_separator show_line=”1″ icon=”fas|leaf”][vc_column_text]
</p><h3>WebSecurityConfig</h3>
<p>WebSecurityConfig.java</p>
<pre class="lang:java decode:true">@Configuration
@EnableWebSecurity
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
                .authorizeRequests()
                .antMatchers( "/css/**").permitAll()
                .anyRequest().authenticated()
                .and()
                .formLogin()
                .loginPage("/login")
                .defaultSuccessUrl("/index")
                .permitAll()
                .and()
                .logout()
                .permitAll()
                .and().csrf().disable(); // we'll enable this in a later blog post
    }

    @Autowired
    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth
                .inMemoryAuthentication()
                .withUser("user").password("{noop}pass").roles("USER");
    }
}</pre>
<p>There’s a lot going on in this class as it contains the main security configuration to enable and configure our basic login form.</p>
<h5>@EnableWebSecurity</h5>
<p>A Marker which allows spring to find custom web application security configuration</p>
<h5>WebSecurityConfigurerAdapter</h5>
<p>Another abstract base class that allows you to override certain aspects of spring security’s default configuration. In our case, we are going to override the methods <em>configure</em> and <em>configureGlobal</em>.</p>
<h5>configure(HttpSecurity http) method</h5>
<p>Note the parameter passed to this method. There several different <em>configure</em> methods. We will be overriding and configuring <em>HttpSecurity </em>specifically<em>.</em></p>
<ul>
<li><em>authorizeRequests()</em> – Allows us to configure which resources on our webserver to secure. You can see from our example code we have allowed un-secured access to our CSS directory and requested that all other resources are secured and can only be accessed by an authenticated user.</li>
<li><em>formLogin()</em> – Tells spring security that we wish to use a login form. We provide the login URL, the URL we want to redirect to if the authentication is successful and finally permit access to the login and logout endpoints.</li>
<li><em>csrf()</em> – For now we are disabling cross-site request forgery protection which by default is enabled. We will cover this later in the series.</li>
</ul>
<h5>configureGlobal method</h5>
<p>Allows us to autowire an <em>AuthenticationManager</em> which will be used globally throughout our application. For this example, we are using a basic in-memory approach with one user and one user role.[/vc_column_text][us_separator show_line=”1″ icon=”fas|leaf”][vc_column_text]
</p><h3>Thymeleaf namespace</h3>
<p>A few things to note in our login.html</p>
<p>The thymeleaf spring security namespace:</p>
<pre class="lang:js decode:true">&lt;html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"&gt;</pre>
<p>This action instructs the form to make a POST request to the URL provided (/login)</p>
<pre class="lang:js decode:true">&lt;form th:action="@{/login}" method="post" class="form login"&gt;</pre>
<p>The if condition can check for a URL parameter, error and logout in this case and display content if they return true</p>
<pre class="lang:js decode:true">        &lt;div class="text--center" th:if="${param.error}"&gt;
            Invalid username and password.
        &lt;/div&gt;
        &lt;div class="text--center" th:if="${param.logout}"&gt;
            You have been logged out.
        &lt;/div&gt;</pre>
<p>Full list of what’s available on the thymeleaf <a href="http://www.thymeleaf.org/doc/tutorials/2.1/thymeleafspring.html#handling-the-command-object" target="_blank" rel="noopener noreferrer">website</a>[/vc_column_text][us_separator show_line=”1″ icon=”fas|leaf”][vc_column_text]
</p><h3>Demo</h3>
<p>To run the demo open the <em>Application.java</em> class and right click run. In order to start the example, the port 8080 will need to be available on your machine. If it is not you can change this default in the application.properties file using:</p>
<pre class="lang:java decode:true">server.port=8081</pre>
<p>Set this to whatever value you wish.[/vc_column_text][vc_video link=”https://youtu.be/aQ6QTQdCfeQ” video_title=”1″][us_separator][vc_column_text]
</p><h3>Unit Testing</h3>
<p>ApplicationTests.java</p>
<pre class="lang:java decode:true">@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
public class ApplicationTests {

	@Autowired
	private MockMvc mockMvc;

	@Test
	public void loginWithValidUserThenAuthenticated() throws Exception {
		FormLoginRequestBuilder login = formLogin()
				.user("user")
				.password("password");

		mockMvc.perform(login)
				.andExpect(authenticated().withUsername("user"));
	}

	@Test
	public void loginWithInvalidUserThenUnauthenticated() throws Exception {
		FormLoginRequestBuilder login = formLogin()
				.user("invalid")
				.password("invalidpassword");

		mockMvc.perform(login)
				.andExpect(unauthenticated());
	}

	@Test
	public void accessUnsecuredResourceThenOk() throws Exception {
		mockMvc.perform(get("/"))
				.andExpect(status().isOk());
	}

	@Test
	public void accessSecuredResourceUnauthenticatedThenRedirectsToLogin() throws Exception {
		mockMvc.perform(get("/hello"))
				.andExpect(status().is3xxRedirection())
				.andExpect(redirectedUrlPattern("**/login"));
	}

	@Test
	@WithMockUser
	public void accessSecuredResourceAuthenticatedThenOk() throws Exception {
		mockMvc.perform(get("/hello"))
				.andExpect(status().isOk());
	}
}</pre>
<h5>@RunWith(SpringRunner.class)</h5>
<p>Tells JUnit to run unit tests with Spring’s testing support</p>
<h5>@SpringBootTest</h5>
<p>Run as spring boot app. i.e. load application.properties and spring beans</p>
<h5>@AutoConfigureMockMvc</h5>
<p>Creates a Test helper class called MockMvc. From this, we can imitate a front-end client making requests to the server.</p>
<h5>@WithMockUser</h5>
<p>Provides the ability to mock certain users. An authenticated user in our case.</p>
<h5>FormLoginRequestBuilder</h5>
<p>A utility class that allows us to create a form based login request.[/vc_column_text][us_separator show_line=”1″ icon=”fas|leaf”][vc_column_text]
</p><h3><a href="https://www.codenerve.com/spring-security-thymeleaf-extras/">Next</a></h3>
<p>Next up, we will be covering spring security’s user roles and the ability to hide and show content on our site based on the user’s permissions.[/vc_column_text][/vc_column][/vc_row][vc_row][vc_column][us_post_navigation layout=”sided”][/vc_column][/vc_row]
</p>

            </section>

        </article>
    </main>
    <footer class="page-footer">
        <h3>codenerve.com</h3>
            <p>Thoughts, stories and ideas.</p>
        <p><a href="../../index.html">Read more posts →</a></p>
        <a class="powered" href="https://ghost.org" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 156 156"><g fill="none" fill-rule="evenodd"><rect fill="#15212B" width="156" height="156" rx="27"/><g transform="translate(36 36)" fill="#F6F8FA"><path d="M0 71.007A4.004 4.004 0 014 67h26a4 4 0 014 4.007v8.986A4.004 4.004 0 0130 84H4a4 4 0 01-4-4.007v-8.986zM50 71.007A4.004 4.004 0 0154 67h26a4 4 0 014 4.007v8.986A4.004 4.004 0 0180 84H54a4 4 0 01-4-4.007v-8.986z"/><rect y="34" width="84" height="17" rx="4"/><path d="M0 4.007A4.007 4.007 0 014.007 0h41.986A4.003 4.003 0 0150 4.007v8.986A4.007 4.007 0 0145.993 17H4.007A4.003 4.003 0 010 12.993V4.007z"/><rect x="67" width="17" height="17" rx="4"/></g></g></svg> Published with Ghost</a></span>
    </footer>
</body>
</html>